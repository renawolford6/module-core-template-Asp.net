(function(n){function o(n,i){abp.message.confirm(abp.utils.formatString(r("AreYouSureWantToDelete"),i),null,i=>{i&&f.delete({id:n}).done(()=>{abp.notify.info(r("SuccessfullyDeleted")),t.ajax.reload()})})}var f=abp.services.app.tenant,r=abp.localization.getSource("AbpProjectName"),i=n("#TenantCreateModal"),u=i.find("form"),e=n("#TenantsTable"),t=e.DataTable({paging:!0,serverSide:!0,ajax:function(t,i){var r=n("#TenantsSearchForm").serializeFormToObject(!0);r.maxResultCount=t.length;r.skipCount=t.start;abp.ui.setBusy(e);f.getAll(r).done(function(n){i({recordsTotal:n.totalCount,recordsFiltered:n.totalCount,data:n.items})}).done(()=>{abp.ui.clearBusy(e)})},buttons:[{name:"refresh",text:'<i class="fas fa-redo-alt"><\/i>',action:()=>t.draw(!1)}],responsive:{details:{type:"column"}},columnDefs:[{targets:0,className:"control",defaultContent:""},{targets:1,data:null,sortable:!1,autoWidth:!1,defaultContent:"",render:(n,t,i)=>['<div class="btn-group">',`   <button type="button" class="btn bg-secondary edit-tenant" data-tenant-id="${i.id}" data-toggle="modal" data-target="#TenantEditModal">`,`       <i class="fas fa-pencil-alt"></i> ${r("Edit")}`,"   <\/button>",'   <button type="button" class="btn bg-secondary dropdown-toggle dropdown-icon" data-toggle="dropdown">',"   <\/button>",'   <div class="dropdown-menu" role="menu">',`     <a href="#" class="dropdown-item delete-tenant" data-tenant-id="${i.id}" data-tenancy-name="${i.tenancyName}">`,`         <i class="fas fa-trash"></i> ${r("Delete")}`,"     <\/a>","   <\/div>","<\/div>"].join("")},{targets:2,data:"tenancyName",sortable:!1},{targets:3,data:"name",sortable:!1},{targets:4,data:"isActive",sortable:!1,render:n=>`<input type="checkbox" disabled ${n?"checked":""}>`}]});u.find(".save-button").click(function(n){if(n.preventDefault(),u.valid()){var e=u.serializeFormToObject();abp.ui.setBusy(i);f.create(e).done(function(){i.modal("hide");u[0].reset();abp.notify.info(r("SavedSuccessfully"));t.ajax.reload()}).always(function(){abp.ui.clearBusy(i)})}});n(document).on("click",".delete-tenant",function(){var t=n(this).attr("data-tenant-id"),i=n(this).attr("data-tenancy-name");o(t,i)});n(document).on("click",".edit-tenant",function(){var t=n(this).attr("data-tenant-id");abp.ajax({url:abp.appPath+"Tenants/EditModal?tenantId="+t,type:"POST",dataType:"html",success:function(t){n("#TenantEditModal div.modal-content").html(t)},error:function(){}})});abp.event.on("tenant.edited",()=>{t.ajax.reload()});i.on("shown.bs.modal",()=>{i.find("input:not([type=hidden]):first").focus()}).on("hidden.bs.modal",()=>{u.clearForm()});n(".btn-search").on("click",()=>{t.ajax.reload()});n(".btn-clear").on("click",()=>{n("input[name=Keyword]").val(""),n('input[name=IsActive][value=""]').prop("checked",!0),t.ajax.reload()});n(".txt-search").on("keypress",n=>{if(n.which==13)return t.ajax.reload(),!1})})(jQuery);